---
title: "Student Success - clean data"
author: "Jemma Marcus-Shi & Linjie Zhu"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    code_folding: show
    df_print: paged
    number_sections: yes
    theme: readable
    toc: yes
    toc_float: yes
    code_download: yes
  word_document:
    toc: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Audience and Purpose

The purpose of our project is to help Mr. Kirk Bogard raise funds for Farmer School of Business. We will create several maps to clearly show companies in regions where it is valuable to try to build external relationships. The audience of our project are shared work producers including the team of people who do the same job as Mr. Kirk Bogard, users who need to know how it is done, and how to do it better.

# Value Proposition

![](poster%20Value%20proposition%20canvas%20simple%20white.png)

## Data Description

Our group will be using the FSB data on the employment status of graduates in order to find information about geographic trends. The data file includes survey data on where students are going, what students' salaries are, and job opportunities in different regions between 2019 to 2021.

# Documented Code to Preprocesses Data

The code was originally written in python in a secure FSB Jupyter Server and translated to be used in R studio. 

##### The necessary libraries are loaded into R {-}
```{r}
library(dplyr)
```

##### The data is loaded and displayed to check the success of the loading {-}
```{r}
df <- read.csv("FSB_Survey_Dirty.csv")
head(df)
```

##### Missing values are evaluated {-}
```{r}
colSums(is.na(df))
```
##### An extra index "X" is removed {-}
```{r}
df <- df[-which(names(df) == "X")]
```
##### Variables are removed due to lack of understanding, missing values, and relevance {-}
```{r}
# Variables "BBRJ", "Study Abroad Courtesy Account", and "Transfer Work" are removed due to lack of understanding and missing variables

df <- df[, !(names(df) %in% c("BBRJ","Study.Abroad.Courtesy.Account", "Transfer.Work..Pre.Banner."))]

# Variables without relevance to the research question are removed

df <- df[, !(names(df) %in% c("nmajor", "Business.Direct.Admit", "First.Generation.College.Stdnt", "Combined.Bacc.and.Masters", "Dean.s.List", "FSB.Scholars", "Honors.Program", "President.s.List", "Cum.Laude", "Magna.Cum.Laude", "Summa.Cum.Laude", "University.Honors","UniversityHonors.w.Distinction", "year.x", "latin_honors", "survey_gradprogram", "survey_gradschool", "survey_internfour","survey_internone", "survey_internships", "survey_internthree", "survey_interntwo"))]
```

##### The data is displayed again and the dimensions are checked to confirm removal of variables {-}
```{r}
head(df)
dim(df)
```

##### Rows that contain a null value for "survey_state" are removed {-}
```{r}
df <- df[!is.na(df$survey_state), , drop = FALSE]
```
##### The data is checked for remaining null values {-}
```{r}
str(df)
```
##### Null values are imputed {-}
```{r}
# Missing values in variables 'survey_city', 'survey_company', and 'survey_deptfunc' are imputed with "Unknown"

df[, c("survey_city", "survey_company", "survey_deptfunc")] <- lapply(df[, c("survey_city", "survey_company", "survey_deptfunc")], function(x) ifelse(is.na(x), "Unknown", x))

# Missing values in variables 'survey_offers', 'survey_pref_field', and 'survey_pref_loc' are imputed with "None"

df[, c("survey_offers", "survey_pref_field", "survey_pref_loc")] <- lapply(df[, c("survey_offers", "survey_pref_field", "survey_pref_loc")], function(x) ifelse(is.na(x), "None", x))

# The missing values in the 'survey_salary' variable are imputed with the mean salary

df$survey_salary[is.na(df$survey_salary)] <- mean(df$survey_salary, na.rm = TRUE)
```
##### The data is checked for remaining null values {-}
```{r}
str(df)
```
##### The modified data is saved to a new CSV file {-}
```{r}
write.csv(df, file = "FSB_Survey.csv", row.names = FALSE)
```

# Explanation on Preprocess Code

We start with analyze the data structure and missing values for each variable. Then we delete several variables which are don't relate to this project or not explained clearly, including BBRJ, Study Abroad Courtesy Account, Transfer Work, latin_honors and so on to make our analysis process easier. Continuously, for accuracy of our analysis, we remove the missing values from the rest variables and checked our data. Moreover, for some variables like 'survey_offers', 'survey_cities' relate to our analysis, we impute them with "Unkown" or "None". Finally, we documented the new data into "FSB_Survey.csv". This document is what we will use for analysis.

# Computering Environment

We run the code R.Version（） to figure out the version of r studio to ensure our code can be reproduce. Also, we will use the "FSB_Survey_Dirty.csv" as our original documents before clean data. And keep all codes for cleaning data in this file and document those new data into "FSB_Survey.csv". Thus, we can rerun the code to ensure reproductible.
