---
title: "Dashboard Template"
author: "Jemma Marcus-Shi and Linjie Zhu"
date: "`r Sys.Date()`"
output:
  flexdashboard::flex_dashboard:
    orientation: rows
---

# Questions and Written Insights 

### Question 1: Students' average salary by region/state

We will calculate the average salary for students by state or region, depending on the differences we find after analysis.

### Question 2: City rank by job opportunities

We will summarize the number of students employed by city and rank those cities by frequency. Thus, we can find which cities give our students the most job opportunities. It will also allow our client to be aware of which cities should be the focus of fundraising efforts. 

# Region/State by Average Salaries {data-orientation="columns"}

```{r,echo=FALSE}
library(dplyr)
library(readr)
library(magrittr)

data <- read.csv('FSB_Survey1.csv')
colnames(data)[colnames(data) == "survey_city"] <- "city"
cities = read.csv('uscities.csv')
city_loc <- cities[, c("city", "state_id", "lat", "lng")]

grouped_data <- data %>%
  group_by(survey_state) %>% 
  summarize(AvgSalary = mean(survey_salary))
```


## Column {data-width="400"}

### Add Bar Charts and/or Scatterplot Map to show Highest Region/State

```{r,echo=FALSE}
library(ggplot2)

# Sort the grouped data by AvgSalary in descending order
grouped_data <- grouped_data %>%
  arrange(desc(AvgSalary))

# Take the top 10 states
top_10_states <- head(grouped_data, 10)

# Create a bar chart for the top 10 states
ggplot(top_10_states, aes(x = reorder(survey_state, -AvgSalary), y = AvgSalary)) +
  geom_bar(stat = "identity", fill = "skyblue") +
  labs(x = "State", y = "Average Salary") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


# City Rank by Job Opportunities {data-orientation="columns"}

```{r}
library(dplyr)
## merged_data <- left_join(data, city_loc, by = "city")

offers_by_city <- data %>%
  group_by(City) %>%
  summarize(Offer_Count = n())

ranked_offers <- offers_by_city %>%
  arrange(desc(Offer_Count)) %>%
  mutate(Rank = row_number())
```

## Column {data-width="400"}

### Add Bar Charts

```{r,echo=FALSE}
library(ggplot2)

ggplot(ranked_offers, aes(x = reorder(City, -Rank), y = Offer_Count)) +
  geom_bar(stat = "identity", fill = "blue") +
  labs(title = "Ranked Job Offers by City", x = "City", y = "Offer Count") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```



